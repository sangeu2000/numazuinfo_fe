(this.webpackJsonpnumazuinfo_fe=this.webpackJsonpnumazuinfo_fe||[]).push([[0],{113:function(e,a,t){},114:function(e,a,t){},116:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=t(20),l=t.n(r),i=(t(74),t(24)),c=t.n(i),s=t(22),m=t(37);var u=function(e){var a=e.location,t=Object(m.useLastLocation)(),n=c.a.parse(a.search),r=null;return"error"in n&&"success"?r="user_cancelled_grant"===n.error?o.a.createElement(s.a,{variant:"danger"},"\uc0ac\uc6a9\uc790\uac00 \ub85c\uadf8\uc778 \uc791\uc5c5\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4"):"claiming_token_failed"===n.error?o.a.createElement(s.a,{variant:"danger"},"\ub85c\uadf8\uc778 \uacfc\uc815 \uc911 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"):"wrong_attempt"===n.error?o.a.createElement(s.a,{variant:"danger"},"\uc798\ubabb\ub41c \uc694\uccad\uc785\ub2c8\ub2e4"):"new_user_fetching_profile_failed"===n.error?o.a.createElement(s.a,{variant:"danger"},"\uc2e0\uaddc \uc720\uc800 \ub4f1\ub85d\uc744 \uc704\ud55c \ucd94\uac00 \uc815\ubcf4 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"):"new_user_fetching_profile_failed"===n.error?o.a.createElement(s.a,{variant:"danger"},"\uc694\uccad \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."):"captcha_verification_failed"===n.error?o.a.createElement(s.a,{variant:"danger"},"reCAPTCHA \uc778\uc99d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"):o.a.createElement(s.a,{variant:"danger"},"\ub85c\uadf8\uc778 \uacfc\uc815 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"):(null===t?window.sessionStorage.setItem("previous_page","/"):"/login"!==t.pathname&&window.sessionStorage.setItem("previous_page",t.pathname),r=""),o.a.createElement("div",{id:"login-intro",className:"bg-light container-fluid text-center"},o.a.createElement("div",{className:"col-12 bg-white rounded shadow",style:{marginTop:"1em"}},r,o.a.createElement("h4",{id:"sign_in_title"},"\ub85c\uadf8\uc778"),o.a.createElement("p",null,"\uc544\ub798 \uc678\ubd80 \uc11c\ube44\uc2a4\ub97c \ud1b5\ud574 \ub85c\uadf8\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),o.a.createElement("a",{href:"https://dev.numazu.info/oauth/request/google",className:"btn",style:{padding:"0 0 0 0"}},o.a.createElement("img",{src:"/sign_in_with_google.png",height:"48px",alt:"Sign in with Google"}))))},d=t(64),g=t(67),h=t(68),p=t(65),v=t.n(p),w=t(23),E=t(34),f=t(66);var _=function(){return o.a.createElement("div",null,"\ubb50\uc368\uc57c\ud558\uc9c0")},k=t(26),b=t.n(k),y=t(27),S=function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(e){var n;Object(d.a)(this,t),(n=a.call(this,e)).handleClose=function(){n.setState({modal_show:!1})},n.handleShow=function(){n.setState({modal_show:!0})},n.handleNameChange=function(e){e.target.value.length>e.target.maxLength&&(e.target.value=e.target.value.slice(0,e.target.maxLength)),n.setState({name:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),console.log(n.props.googleReCaptchaProps.executeRecaptcha("register")),n.props.googleReCaptchaProps.executeRecaptcha("register").then((function(e){var a={name:n.state.name,token:n.query.token,recaptcha:e};b.a.post("https://dev.numazu.info/account/register",a,{withCredentials:!0}).then((function(e){window.location=e.data.redirect})).catch((function(){window.location="/login?error=wrong_attempt"}))})).catch((function(){window.location="/login?error=captcha_verification_failed"}))},n.render=function(){return n.hasError?o.a.createElement(v.a,{to:"/login?error=wrong_attempt"}):o.a.createElement("div",{id:"login-new-user",className:"bg-light container-fluid text-center"},o.a.createElement("div",{className:"col-12 bg-white rounded shadow",style:{marginTop:"1em"}},o.a.createElement("h4",{id:"sign_in_title"},"\uc2e0\uaddc \uc720\uc800 \ub4f1\ub85d"),o.a.createElement("p",null,"\xa0"),o.a.createElement("p",null,"\uc544\ub798 \uc790\ub3d9\uc73c\ub85c \uac00\uc838\uc640\uc9c4 \uc815\ubcf4\uac00 \uc62c\ubc14\ub978\uc9c0 \ud655\uc778\ud574\uc8fc\uc138\uc694."),o.a.createElement("p",null,"\uc774\ub984\uc740 \uc2e4\uba85\uc774 \uc544\ub2c8\uc5b4\ub3c4 \ubb34\ubc29\ud558\ub098, \ubaa8\ub4e0 \uc0ac\ub78c\uc5d0\uac8c \uacf5\uac1c\ub418\uba70 \ucd94\ud6c4 \ubcc0\uacbd\uc774 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4."),o.a.createElement("p",null,"\uc774\uba54\uc77c\uc740 \uc778\uc99d\ub41c \uad6c\uae00 \uacc4\uc815\uc758 \uc774\uba54\uc77c\uc744 \uc0ac\uc6a9\ud558\uba70, \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),o.a.createElement("p",null,"\xa0"),o.a.createElement(w.a,{onSubmit:n.handleSubmit},o.a.createElement(w.a.Group,{controlId:"joinForm.Google.Email"},o.a.createElement(w.a.Label,null,"\uc774\uba54\uc77c"),o.a.createElement(w.a.Control,{type:"email",value:n.query.email,readOnly:"",disabled:!0})),o.a.createElement(w.a.Group,{controlId:"joinForm.Google.Name"},o.a.createElement(w.a.Label,null,"\uc774\ub984"),o.a.createElement(w.a.Control,{type:"text",defaultValue:n.query.name,maxLength:"30",onChange:n.handleNameChange})),o.a.createElement("p",null,"\uc544\ub798 \ub4f1\ub85d \ubc84\ud2bc\uc744 \ub20c\ub7ec \uc9c4\ud589\ud568\uc73c\ub85c\uc11c ",o.a.createElement("a",{href:"#",onClick:n.handleShow},"\uc774\uc6a9\uc57d\uad00 \ubc0f \uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac \ubc29\uce68"),"\uc5d0 \ub3d9\uc758\ud55c \uac83\uc73c\ub85c \uac04\uc8fc\ud569\ub2c8\ub2e4."),o.a.createElement(f.a,{variant:"primary",type:"submit"},"\ub4f1\ub85d"))),o.a.createElement(E.a,{show:n.state.modal_show,onHide:n.handleClose,size:"xl"},o.a.createElement(E.a.Header,{closeButton:!0},o.a.createElement(E.a.Title,null,"\uc774\uc6a9\uc57d\uad00 \ubc0f \uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac \ubc29\uce68")),o.a.createElement(E.a.Body,null,o.a.createElement(_,null))))},n.query=c.a.parse(n.props.location.search),n.hasError=!("name"in n.query)||!("email"in n.query)||!("token"in n.query)||!1;var r="";return"name"in n.query&&(r=n.query.name),n.state={modal_show:!1,name:r},n}return t}(o.a.Component),N=Object(y.c)(S),C=t(6);t(61);var x=function(e){var a=e.location,t=Object(y.b)().executeRecaptcha,n=c.a.parse(a.search);return"key"in n?(t("issue_token").then((function(e){var a={key:n.key,recaptcha:e};b.a.post("https://dev.numazu.info/token/issue",a,{withCredentials:!0}).then((function(e){window.localStorage.setItem("token",e.data.token),window.localStorage.setItem("expiration",e.data.expiration),window.localStorage.setItem("permissions",e.data.permissions);var a=window.sessionStorage.getItem("previous_page");a?window.sessionStorage.removeItem("previous_page"):a="/",window.location=a})).catch((function(e){e.response?window.location="/login?error="+e.response.data.error:window.location="/login?error=claiming_token_failed"}))})).catch((function(){window.location="/login?error=captcha_verification_failed"})),o.a.createElement("div",{id:"login-issue-token",className:"bg-light container-fluid text-center"},o.a.createElement("div",{className:"col-12 bg-white rounded shadow",style:{marginTop:"1em"}},o.a.createElement("p",null,"\ub85c\uadf8\uc778 \uc911\uc785\ub2c8\ub2e4...")))):o.a.createElement(C.Redirect,{to:"/login?error=wrong_attempt"})},I=(t(113),t(35)),L=t(49),R=t(16);var A=function(e){void 0===e&&(e=!1);var a=window.localStorage.getItem("token");return null===a?new Promise((function(e,a){a()})):e?b.a.post("https://dev.numazu.info/token/validate",{token:a}).catch((function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("expiration"),window.localStorage.removeItem("permissions")})):new Promise((function(e,a){e()}))};var j=function(){var e=o.a.createElement(R.Link,{className:"nav-link",role:"button",to:"/login"},"\ub85c\uadf8\uc778");return A(!0).then((function(){console.log("is logged in"),e=o.a.createElement(R.Link,{className:"nav-link",role:"button",to:"/mypage"},"Mypage")})).catch((function(){console.log("is not logged in")})),o.a.createElement(I.a,{bg:"dark",expand:"lg",variant:"dark",sticky:"top",fixed:"top"},o.a.createElement(I.a.Brand,null,"NUMAZU.info"),o.a.createElement(I.a.Toggle,{"aria-controls":"navbar-menus"}),o.a.createElement(I.a.Collapse,{id:"navbar-menus"},o.a.createElement(L.a,{className:"mr-auto",id:"navbar-menu-left"},o.a.createElement(R.Link,{className:"nav-link",role:"button",to:"/"},"\uac80\uc0c9"),o.a.createElement(R.Link,{className:"nav-link",role:"button",to:"/category"},"\uce74\ud14c\uace0\ub9ac")),o.a.createElement(L.a,{className:"mr-auto justify-content-end",id:"navbar-menu-right"},e)))};t(114);var q=function(){return o.a.createElement("div",{className:"footer"},"7th Center Maki Nishikino, 5th Center You Watanabe, 4th Center Rina Tennoji")};var z=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(R.BrowserRouter,null,o.a.createElement(m.LastLocationProvider,null,o.a.createElement(j,null),o.a.createElement(C.Switch,null,o.a.createElement(C.Route,{exact:!0,path:"/"}),o.a.createElement(C.Route,{path:"/login",component:u}),o.a.createElement(C.Route,{path:"/new_user",component:N}),o.a.createElement(C.Route,{path:"/get_token",component:x})),o.a.createElement(q,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(115);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y.a,{reCaptchaKey:"6LehRbAZAAAAAAHkv7SHnG3sW4yKENvg-vdUFl_U",language:"ko"},o.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,a,t){},69:function(e,a,t){e.exports=t(116)},74:function(e,a,t){}},[[69,1,2]]]);
//# sourceMappingURL=main.b4bfd606.chunk.js.map