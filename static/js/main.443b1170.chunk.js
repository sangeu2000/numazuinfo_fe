(this.webpackJsonpnumazuinfo_fe=this.webpackJsonpnumazuinfo_fe||[]).push([[0],{111:function(e,a,t){},112:function(e,a,t){},114:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(21),l=t.n(o),i=(t(72),t(25)),c=t.n(i),s=t(23),m=t(39);var u=function(e){var a=e.location,t=Object(m.useLastLocation)(),n=c.a.parse(a.search),o=null;return"error"in n&&"success"?o="user_cancelled_grant"===n.error?r.a.createElement(s.a,{variant:"danger"},"\uc0ac\uc6a9\uc790\uac00 \ub85c\uadf8\uc778 \uc791\uc5c5\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4"):"claiming_token_failed"===n.error?r.a.createElement(s.a,{variant:"danger"},"\ub85c\uadf8\uc778 \uacfc\uc815 \uc911 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"):"wrong_attempt"===n.error?r.a.createElement(s.a,{variant:"danger"},"\uc798\ubabb\ub41c \uc694\uccad\uc785\ub2c8\ub2e4"):"new_user_fetching_profile_failed"===n.error?r.a.createElement(s.a,{variant:"danger"},"\uc2e0\uaddc \uc720\uc800 \ub4f1\ub85d\uc744 \uc704\ud55c \ucd94\uac00 \uc815\ubcf4 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"):"new_user_fetching_profile_failed"===n.error?r.a.createElement(s.a,{variant:"danger"},"\uc694\uccad \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."):"captcha_verification_failed"===n.error?r.a.createElement(s.a,{variant:"danger"},"reCAPTCHA \uc778\uc99d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"):r.a.createElement(s.a,{variant:"danger"},"\ub85c\uadf8\uc778 \uacfc\uc815 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"):(null===t?window.sessionStorage.setItem("previous_page","/"):"/login"!==t.pathname&&window.sessionStorage.setItem("previous_page",t.pathname),o=""),r.a.createElement("div",{id:"login-intro",className:"bg-light container-fluid text-center"},r.a.createElement("div",{className:"col-12 bg-white rounded shadow",style:{marginTop:"1em"}},o,r.a.createElement("h4",{id:"sign_in_title"},"\ub85c\uadf8\uc778"),r.a.createElement("p",null,"\uc544\ub798 \uc678\ubd80 \uc11c\ube44\uc2a4\ub97c \ud1b5\ud574 \ub85c\uadf8\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),r.a.createElement("a",{href:"https://dev.numazu.info/oauth/request/google",className:"btn",style:{padding:"0 0 0 0"}},r.a.createElement("img",{src:"/sign_in_with_google.png",height:"48px",alt:"Sign in with Google"}))))},g=t(62),d=t(66),h=t(65),p=t(63),E=t.n(p),v=t(24),f=t(35),w=t(64);var _=function(){return r.a.createElement("div",null,"\ubb50\uc368\uc57c\ud558\uc9c0")},k=t(28),b=t.n(k),y=t(29),N=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(e){var n;Object(g.a)(this,t),(n=a.call(this,e)).handleClose=function(){n.setState({modal_show:!1})},n.handleShow=function(){n.setState({modal_show:!0})},n.handleNameChange=function(e){e.target.value.length>e.target.maxLength&&(e.target.value=e.target.value.slice(0,e.target.maxLength)),n.setState({name:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),console.log(n.props.googleReCaptchaProps.executeRecaptcha("register")),n.props.googleReCaptchaProps.executeRecaptcha("register").then((function(e){var a={name:n.state.name,token:n.query.token,recaptcha:e};b.a.post("https://dev.numazu.info/account/register",a,{withCredentials:!0}).then((function(e){window.location=e.data.redirect})).catch((function(){window.location="/login?error=wrong_attempt"}))})).catch((function(){window.location="/login?error=captcha_verification_failed"}))},n.render=function(){return n.hasError?r.a.createElement(E.a,{to:"/login?error=wrong_attempt"}):r.a.createElement("div",{id:"login-new-user",className:"bg-light container-fluid text-center"},r.a.createElement("div",{className:"col-12 bg-white rounded shadow",style:{marginTop:"1em"}},r.a.createElement("h4",{id:"sign_in_title"},"\uc2e0\uaddc \uc720\uc800 \ub4f1\ub85d"),r.a.createElement("p",null,"\xa0"),r.a.createElement("p",null,"\uc544\ub798 \uc790\ub3d9\uc73c\ub85c \uac00\uc838\uc640\uc9c4 \uc815\ubcf4\uac00 \uc62c\ubc14\ub978\uc9c0 \ud655\uc778\ud574\uc8fc\uc138\uc694."),r.a.createElement("p",null,"\uc774\ub984\uc740 \uc2e4\uba85\uc774 \uc544\ub2c8\uc5b4\ub3c4 \ubb34\ubc29\ud558\ub098, \ubaa8\ub4e0 \uc0ac\ub78c\uc5d0\uac8c \uacf5\uac1c\ub418\uba70 \ucd94\ud6c4 \ubcc0\uacbd\uc774 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4."),r.a.createElement("p",null,"\uc774\uba54\uc77c\uc740 \uc778\uc99d\ub41c \uad6c\uae00 \uacc4\uc815\uc758 \uc774\uba54\uc77c\uc744 \uc0ac\uc6a9\ud558\uba70, \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),r.a.createElement("p",null,"\xa0"),r.a.createElement(v.a,{onSubmit:n.handleSubmit},r.a.createElement(v.a.Group,{controlId:"joinForm.Google.Email"},r.a.createElement(v.a.Label,null,"\uc774\uba54\uc77c"),r.a.createElement(v.a.Control,{type:"email",value:n.query.email,readOnly:"",disabled:!0})),r.a.createElement(v.a.Group,{controlId:"joinForm.Google.Name"},r.a.createElement(v.a.Label,null,"\uc774\ub984"),r.a.createElement(v.a.Control,{type:"text",defaultValue:n.query.name,maxLength:"30",onChange:n.handleNameChange})),r.a.createElement("p",null,"\uc544\ub798 \ub4f1\ub85d \ubc84\ud2bc\uc744 \ub20c\ub7ec \uc9c4\ud589\ud568\uc73c\ub85c\uc11c ",r.a.createElement("a",{href:"#",onClick:n.handleShow},"\uc774\uc6a9\uc57d\uad00 \ubc0f \uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac \ubc29\uce68"),"\uc5d0 \ub3d9\uc758\ud55c \uac83\uc73c\ub85c \uac04\uc8fc\ud569\ub2c8\ub2e4."),r.a.createElement(w.a,{variant:"primary",type:"submit"},"\ub4f1\ub85d"))),r.a.createElement(f.a,{show:n.state.modal_show,onHide:n.handleClose,size:"xl"},r.a.createElement(f.a.Header,{closeButton:!0},r.a.createElement(f.a.Title,null,"\uc774\uc6a9\uc57d\uad00 \ubc0f \uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac \ubc29\uce68")),r.a.createElement(f.a.Body,null,r.a.createElement(_,null))))},n.query=c.a.parse(n.props.location.search),n.hasError=!("name"in n.query)||!("email"in n.query)||!("token"in n.query)||!1;var o="";return"name"in n.query&&(o=n.query.name),n.state={modal_show:!1,name:o},n}return t}(r.a.Component),C=Object(y.c)(N),S=t(6);t(60);var x=function(e){var a=e.location,t=Object(y.b)().executeRecaptcha,n=c.a.parse(a.search);return"key"in n?(t("issue_token").then((function(e){var a={key:n.key,recaptcha:e};b.a.post("https://dev.numazu.info/token/issue",a,{withCredentials:!0}).then((function(e){window.localStorage.setItem("token",e.data.token),window.localStorage.setItem("expiration",e.data.expiration),window.localStorage.setItem("permissions",e.data.permissions);var a=window.sessionStorage.getItem("previous_page");a?window.sessionStorage.removeItem("previous_page"):a="/",window.location=a})).catch((function(e){e.response?window.location="/login?error="+e.response.data.error:window.location="/login?error=claiming_token_failed"}))})).catch((function(){window.location="/login?error=captcha_verification_failed"})),r.a.createElement("div",{id:"login-issue-token",className:"bg-light container-fluid text-center"},r.a.createElement("div",{className:"col-12 bg-white rounded shadow",style:{marginTop:"1em"}},r.a.createElement("p",null,"\ub85c\uadf8\uc778 \uc911\uc785\ub2c8\ub2e4...")))):r.a.createElement(S.Redirect,{to:"/login?error=wrong_attempt"})},L=(t(111),t(36)),R=t(48),A=t(17);function I(){return window.localStorage.getItem("token")}var j=function(){return null!==I()};var q=function(){var e=r.a.createElement(A.Link,{className:"nav-link",role:"button",to:"/login"},"\ub85c\uadf8\uc778");return j(!0).then((function(){console.log("is logged in"),e=r.a.createElement(A.Link,{className:"nav-link",role:"button",to:"/mypage"},"Mypage")})).catch((function(){console.log("is not logged in")})),r.a.createElement(L.a,{bg:"dark",expand:"lg",variant:"dark",sticky:"top",fixed:"top"},r.a.createElement(L.a.Brand,null,"NUMAZU.info"),r.a.createElement(L.a.Toggle,{"aria-controls":"navbar-menus"}),r.a.createElement(L.a.Collapse,{id:"navbar-menus"},r.a.createElement(R.a,{className:"mr-auto",id:"navbar-menu-left"},r.a.createElement(A.Link,{className:"nav-link",role:"button",to:"/"},"\uac80\uc0c9"),r.a.createElement(A.Link,{className:"nav-link",role:"button",to:"/category"},"\uce74\ud14c\uace0\ub9ac")),r.a.createElement(R.a,{className:"mr-auto justify-content-end",id:"navbar-menu-right"},e)))};t(112);var O=function(){return r.a.createElement("div",{className:"footer"},"7th Center Maki Nishikino, 5th Center You Watanabe, 4th Center Rina Tennoji")};var T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(A.BrowserRouter,null,r.a.createElement(m.LastLocationProvider,null,r.a.createElement(q,null),r.a.createElement(S.Switch,null,r.a.createElement(S.Route,{exact:!0,path:"/"}),r.a.createElement(S.Route,{path:"/login",component:u}),r.a.createElement(S.Route,{path:"/new_user",component:C}),r.a.createElement(S.Route,{path:"/get_token",component:x})),r.a.createElement(O,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(113);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y.a,{reCaptchaKey:"6LehRbAZAAAAAAHkv7SHnG3sW4yKENvg-vdUFl_U",language:"ko"},r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,a,t){},67:function(e,a,t){e.exports=t(114)},72:function(e,a,t){}},[[67,1,2]]]);
//# sourceMappingURL=main.443b1170.chunk.js.map